<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
  <meta charset="UTF-8">
  <title th:text="${query} + ' ë¦¬ë·° ë¶„ì„'"></title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/wordcloud2.js/1.1.2/wordcloud2.min.js"></script>
</head>
<body>
<h2 th:text="'ğŸ” ' + ${query} + ' ë¸”ë¡œê·¸ ë¦¬ë·° ë¶„ì„'"></h2>

<div style="display:flex; gap:20px;">
  <div id="wordcloud" style="width:50%; height:300px;"></div>
  <canvas id="sentimentChart" width="400" height="300"></canvas>
</div>

<div>
  <h3>ğŸ“ ë¸”ë¡œê·¸ ë¦¬ë·° ëª©ë¡</h3>
  <div th:each="review : ${reviews}">
    <a th:href="${review.link}" target="_blank" th:text="'ğŸ”— ' + ${review.title}"></a>
    <p th:text="${review.desc}"></p>
  </div>
</div>

<script th:inline="javascript">
  const wordList = /*[[${topWords}]]*/ [];
  WordCloud(document.getElementById('wordcloud'), {
    list: wordList,
    gridSize: 10,
    weightFactor: 5,
    fontFamily: 'Noto Sans KR',
    color: 'random-dark',
    backgroundColor: '#fff'
  });

  new Chart(document.getElementById('sentimentChart'), {
    type: 'bar',
    data: {
      labels: ['ê¸ì • ë¦¬ë·°', 'ë¶€ì • ë¦¬ë·°'],
      datasets: [{
        label: 'ë¦¬ë·° ìˆ˜',
        data: [/*[[${posCount}]]*/, /*[[${negCount}]]*/],
        backgroundColor: ['#4caf50', '#f44336']
      }]
    }
  });
</script>
</body>
</html>
