<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>ë§›ì§‘ì¶”ì²œ</title>
    <link rel="stylesheet" th:href="@{/css/style.css?v=1.0}">
</head>

<body>

<!-- âœ… í—¤ë” -->
<header>
    <h1><a href="/main">ğŸ½ï¸ ë§›ì§‘ì¶”ì²œ</a></h1>

    <!-- ë¡œê·¸ì¸ëœ ì‚¬ìš©ì -->
    <div class="user-info" sec:authorize="isAuthenticated()">
        ğŸ‘¤ <span th:text="${#authentication.name + 'ë‹˜'}"></span>
        <a href="/logout" class="login-btn">ë¡œê·¸ì•„ì›ƒ</a>
    </div>

    <!-- ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ì -->
    <div class="user-info" sec:authorize="isAnonymous()">
        <a href="/user/login" class="login-btn">ë¡œê·¸ì¸</a>
    </div>
</header>

<!-- ğŸ” ê²€ìƒ‰ì°½ -->
<div class="search-bar">
	<form action="/recommend/search" method="GET">
	    <input type="text" name="keyword" placeholder="ì§€ì—­ëª…ì„ ì…ë ¥í•˜ì„¸ìš”">
	  <button type="submit">ğŸ” ê²€ìƒ‰</button>
	</form>
</div>

<!-- ğŸ“ ì¸ê¸° ì§€ì—­ ë²„íŠ¼ -->
<div class="search-section">
    <div class="region-buttons">
        <span class="location-label">ğŸ“ ì¸ê¸° ì§€ì—­</span><br>

        <!-- âœ… ì¸ê¸° ì§€ì—­ ìˆì„ ë•Œ -->
        <th:block th:if="${popularRegions != null and !#lists.isEmpty(popularRegions)}">
            <th:block th:each="region : ${popularRegions}">
			<button type="button"
			        class="region-btn"
			        th:text="${region}"
			        th:attr="data-region=${region}">
			</button>
            </th:block>
        </th:block>

        <!-- â— ì¸ê¸° ì§€ì—­ ì—†ì„ ë•Œ -->
        <th:block th:if="${popularRegions == null or #lists.isEmpty(popularRegions)}">
            <span style="color: gray;">âš ï¸ ìµœê·¼ ê²€ìƒ‰ëœ ì§€ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</span>
        </th:block>
    </div>
</div>

<!-- âœ… ê²Œì‹œíŒ ë°”ë¡œê°€ê¸° -->
<div class="button-group">
    <a href="/board/list" class="action-btn">ğŸ“‚ ë§›ì§‘ ê²Œì‹œíŒ ë³´ê¸°</a>
    <a href="/restaurant/write" class="action-btn">ğŸ“ ë§›ì§‘ ì§ì ‘ ë“±ë¡</a>
</div>


<!-- â¬‡ï¸ í‘¸í„° -->
<footer style="text-align: center; margin-top: 80px;">
    Â© 2025 ë™ì–‘ë¯¸ë˜ëŒ€í•™êµ ìµœì§€ì•ˆ
</footer>

<!-- ë²„íŠ¼ ì„ íƒ íš¨ê³¼ ìŠ¤í¬ë¦½íŠ¸ -->
<script>
    const buttons = document.querySelectorAll('.region-btn');
    buttons.forEach(btn => {
        btn.addEventListener('click', () => {
            buttons.forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');

            const region = btn.dataset.region;
            if (region) {
                window.location.href = `/recommend/search?keyword=${region}`;
            }
        });
    });
</script>
</body>
</html>
